/**
 ******************************************************************************
 * @file    Drivers/API/Src/API_ADS1293.c
 * @author  Patricio Hans HÃ¼ttmann
 * @brief   This file provides firmware functions to manage ADS1293 device
 */
/* Includes ------------------------------------------------------------------*/
#include <API_SPI.h>
#include <stdio.h>
#include <API_ADS1293.h>

/**
 * @brief  Initialize ADS1293 device
 * @param  none
 * @retval bool Init process status
 */
bool_t ads1293Init(void) {
	/* Init SPI peripheral */
	if (!spiInit(0)) {
		return false;
	}
	return true;
}

/**
 * @brief  Read ADS1293 ID register
 * @param  pidData pointer
 * @retval uint8_t ID value
 */
void ads1293ReadID(uint8_t *pidData) {
	uint8_t ptxData = REVID;
	uint8_t prxData = 0;

	setNSS(GPIO_PIN_RESET);
	spiSendData(&ptxData, 1);
	spiReceiveData(&prxData, 1);
	setNSS(GPIO_PIN_SET);

	return prxData;
}
